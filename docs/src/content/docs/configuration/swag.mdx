---
title: Replacing default nginx with SWAG and configuring it for Remnawave
description: A guide on installing and configuring SWAG to replace the default nginx in Remnawave.
---

import { Steps, LinkButtons, Tabs, TabItem, Icons, FileTree, Code, Badges, LinkCard } from '@astrojs/starlight/components';

First, you need to decide whether you want to use [SWAG](https://github.com/linuxserver/docker-swag) or stick with the default nginx configuration. SWAG is a popular and easy choice for reverse proxy setups, especially when you've got a lot of stacks/containers to manage. It comes with built-it cert renewal, templates for various containers, which are a bit changed for beginner-friendly experience.

There are 2 ways. You are "geek" and you stick to [Pingora](https://github.com/cloudflare/pingora)/[River](https://github.com/memorysafety/river) or you are "normal" and you use default Nginx because you don't want to deal with it, aight? SWAG is same nginx you familiar with (watch the pic below), but with some extra features and easier configuration. 

:::tip[Contribution]
Your critisizm won't be even viewed. However, I appreciate any feedback for IMPROVING it!
:::

<div style={{ display: 'flex', justifyContent: 'center' }}>
  <img 
    src="https://raw.githubusercontent.com/eGamesAPI/remnawave-reverse-proxy/refs/heads/main/docs/src/assets/en/swag/dialog.webp" 
    alt="Netbird registration" 
    style={{ maxWidth: '60%' }} 
  />
</div>

:::danger[Important]
You can't use SWAG if you installed Panel and Node on one machine. Panel and node installation uses nginx.sock, but for some reason I didn't manage to make SWAG remove it, so you don't have to manually stop it. Otherwise it will give you a message that sock is already used.
:::

## Installing SWAG

:::note
All steps were reproduced under root.
:::

<Steps>

1. Create a directory for SWAG.

    ```bash
    mkdir /opt/swag
    ```

2. Create a docker compose file.

    ```bash
    nano docker-compose.yml
    ```

    ```yml
    swag:
      image: lscr.io/linuxserver/swag:latest
      container_name: swag
      cap_add:
        - NET_ADMIN
      environment:
        - PUID=1000
        - PGID=1000
        - TZ=Etc/UTC
        - URL=domain.com
        - VALIDATION=dns
        - SUBDOMAINS=wildcard
        - DNSPLUGIN=cloudflare
        - PROPAGATION=60
        - SWAG_AUTORELOAD=true
      volumes:
        - /path/to/swag:/config
        - /dev/shm:/dev/shm:rw
      restart: unless-stopped
      network_mode: host
    ```

      I guess optional, but can be added

    ```yml
      logging:
        driver: 'json-file'
        options:
          max-size: '30m'
          max-file: '5'
    ```

3. Generate a Cloudflare [API token](https://dash.cloudflare.com/profile/api-tokens) with `DNS:Read`, `DNS:Edit` permissions to `domain.com` and copy the token.

4. Edit `/path/to/swag/dns-conf/cloudflare.ini`, delete everything and paste the following with your token:

    ```ini
    dns_cloudflare_api_token = token
    ```

5. Start the stack and watch logs, we'll need them in a second.

    ```bash
    docker compose up -d && docker compose logs -f -t
    ```

    In case you've done everything right "Server ready." will pop up in logs and make sure that `domain.com` shows the welcome page with a valid certificate. But we need logs for monitoring autoreload logs in case you've done mistakes in proxy-conf.

</Steps>

## Configuring SWAG

Now we need to implement the nginx configuration we had for SWAG to work with remnawave panel & nodes.

1. Copy template for remnawave

    ```bash
    cd /path/to/swag/config/nginx/proxy-confs
    cp _template.subdomain.conf.sample remnawave.subdomain.conf
    ```

2. Edit the configuration file

    ```bash
    nano remnawave.subdomain.conf
    ```

    
## Securing SWAG

## Adding mods